"""
AI 모듈 연결 및 분석 유틸리티

TODO: AI 모듈 연결
- AI 모듈은 서버 내부에서 직접 import하여 사용
- 예시: from ai_module import analyze_document, analyze_grades, generate_comprehensive_report
"""


def get_mock_saenggibu_analysis():
    """
    생기부 분석 목업 데이터

    TODO: 실제 AI 모듈 연결 시 제거
    """
    return {
        "강점요약": {
            "첫번째_강점": "수학 관련 심화 탐구 활동이 우수함",
            "두번째_강점": "지속적인 봉사활동을 통한 리더십 함양",
            "세번째_강점": "과학 프로젝트 참여를 통한 문제 해결 능력"
        },
        "약점요약": {
            "첫번째_약점": "인문학 관련 독서 및 활동 부족",
            "두번째_약점": "예술 및 체육 활동 경험 미흡",
            "세번째_약점": "전공 관련 심화 독서 필요"
        },
        "생기부_진단개요": {
            "한줄 요약": "이공계 전공 적합도가 높으나 인문학적 소양 보완 필요",
            "본문": "학생은 수학, 과학 교과에서 우수한 성적을 유지하고 있으며, 관련 탐구 활동도 활발히 진행하고 있습니다. 특히 수학 동아리 활동과 과학 프로젝트 참여를 통해 이공계 전공에 필요한 기초 역량을 충분히 갖추고 있습니다. 다만, 융합형 인재로 성장하기 위해서는 인문학적 소양과 예술적 감수성을 기를 수 있는 활동이 보완되어야 합니다."
        },
        "진로적합성_강화방안": {
            "강화방안": {
                "한줄요약": "전공 관련 심화 프로젝트와 독서 활동 확대",
                "설명": "현재 학생의 이공계 역량을 더욱 강화하고, 부족한 인문학적 소양을 보완하는 것이 필요합니다.",
                "단계별_방안": {
                    "1단계": "전공 관련 심화 독서 및 독서록 작성 (월 2권 이상)",
                    "2단계": "과학기술과 사회를 연결하는 융합 프로젝트 진행",
                    "3단계": "대학 연구실 방문 또는 멘토링 프로그램 참여"
                }
            },
            "비교과_지도필요_영역": {
                "한줄요약": "인문학적 소양 및 리더십 활동 강화",
                "설명": "이공계 전공자로서 필요한 인문학적 통찰력과 협업 능력을 키우기 위한 활동이 필요합니다.",
                "프로젝트_및_심화활동_추천": [
                    {
                        "프로젝트_번호": 1,
                        "제목": "AI 윤리 탐구 프로젝트",
                        "내용": "인공지능 기술의 발전과 윤리적 문제를 탐구하고, 해결 방안을 제시하는 프로젝트. 기술과 인문학의 융합적 사고 함양"
                    },
                    {
                        "프로젝트_번호": 2,
                        "제목": "과학 커뮤니케이션 활동",
                        "내용": "어린 학생들을 대상으로 과학 개념을 쉽게 설명하는 봉사 활동. 전공 지식과 소통 능력 동시 향상"
                    },
                    {
                        "프로젝트_번호": 3,
                        "제목": "지역 환경 문제 해결 캠페인",
                        "내용": "과학적 분석을 바탕으로 지역 환경 문제를 조사하고 해결 방안을 제안하는 활동. 사회적 책임감과 실천력 강화"
                    }
                ]
            },
            "전공_관련_탐구_및_독서활동": {
                "설명": "전공 적합성을 높이고 학업 역량을 강화하기 위한 추천 도서",
                "책_추천": [
                    {
                        "책_번호": 1,
                        "제목": "코스모스 - 칼 세이건",
                        "내용": "천문학과 우주에 대한 과학적 이해를 넓히고, 인간과 우주의 관계를 철학적으로 성찰할 수 있는 고전"
                    },
                    {
                        "책_번호": 2,
                        "제목": "이기적 유전자 - 리처드 도킨스",
                        "내용": "진화생물학의 핵심 개념을 이해하고, 과학적 사고력을 기를 수 있는 필독서"
                    },
                    {
                        "책_번호": 3,
                        "제목": "생각하는 기계 - 제임스 배럿",
                        "내용": "인공지능의 발전과 미래 사회 변화를 예측하고, 기술과 윤리에 대한 통찰력 함양"
                    }
                ]
            }
        }
    }


def get_mock_grade_analysis():
    """
    성적 분석(내신) 목업 데이터

    TODO: 실제 AI 모듈 연결 시 제거
    """
    return {
        "내신": {
            "성적요약": {
                "최고등급": "1.5등급",
                "성적추이": "상승세",
                "반영과목": "국수영사과 평균 1.8등급"
            },
            "등급변화값": "+0.3등급 상승",
            "단기목표": "1학기 내 전 과목 1등급대 진입",
            "장기목표": "3학년 1학기까지 평균 1.5등급 유지",
            "학기별성적추이그래프": {
                "전과목": {
                    "1-1": "2.1",
                    "1-2": "2.0",
                    "2-1": "1.8",
                    "2-2": "1.7",
                    "3-1": "1.6"
                },
                "국수영사과": {
                    "1-1": "1.9",
                    "1-2": "1.8",
                    "2-1": "1.7",
                    "2-2": "1.6",
                    "3-1": "1.5"
                },
                "국수영사": {
                    "1-1": "1.8",
                    "1-2": "1.7",
                    "2-1": "1.6",
                    "2-2": "1.5",
                    "3-1": "1.4"
                },
                "국수영과": {
                    "1-1": "2.0",
                    "1-2": "1.9",
                    "2-1": "1.8",
                    "2-2": "1.7",
                    "3-1": "1.6"
                },
                "국어과목": {
                    "1-1": "2",
                    "1-2": "2",
                    "2-1": "1",
                    "2-2": "1"
                },
                "수학과목": {
                    "1-1": "1",
                    "1-2": "1",
                    "2-1": "1",
                    "2-2": "1"
                },
                "영어과목": {
                    "1-1": "2",
                    "1-2": "2",
                    "2-1": "2",
                    "2-2": "1"
                },
                "사회과목": {
                    "1-1": "2",
                    "1-2": "2",
                    "2-1": "2",
                    "2-2": "2"
                },
                "탐구과목": {
                    "1-1": "2",
                    "1-2": "2",
                    "2-1": "1",
                    "2-2": "1"
                }
            },
            "학기별등급표": {
                "학기별전교과평균등급": {
                    "1-1": "2.1",
                    "1-2": "2.0",
                    "2-1": "1.8",
                    "2-2": "1.7",
                    "3-1": "1.6"
                },
                "반영과목별평균등급": {
                    "전과목": "1.8",
                    "국수영사과": "1.7",
                    "국수영사": "1.6",
                    "국수영과": "1.8"
                },
                "성적표": {
                    "국어": {
                        "1-1": "2",
                        "1-2": "2",
                        "2-1": "1",
                        "2-2": "1",
                        "3-1": "1",
                        "과목평균": "1.4"
                    },
                    "수학": {
                        "1-1": "1",
                        "1-2": "1",
                        "2-1": "1",
                        "2-2": "1",
                        "3-1": "1",
                        "과목평균": "1.0"
                    },
                    "영어": {
                        "1-1": "2",
                        "1-2": "2",
                        "2-1": "2",
                        "2-2": "1",
                        "3-1": "1",
                        "과목평균": "1.6"
                    },
                    "사회": {
                        "1-1": "2",
                        "1-2": "2",
                        "2-1": "2",
                        "2-2": "2",
                        "3-1": "2",
                        "과목평균": "2.0"
                    },
                    "과학": {
                        "1-1": "2",
                        "1-2": "2",
                        "2-1": "1",
                        "2-2": "1",
                        "3-1": "1",
                        "과목평균": "1.4"
                    },
                    "한국사": {
                        "1-1": "3",
                        "1-2": "2",
                        "2-1": "2",
                        "2-2": "2",
                        "3-1": "2",
                        "과목평균": "2.2"
                    },
                    "교양": {
                        "1-1": "2",
                        "1-2": "2",
                        "2-1": "2",
                        "2-2": "1",
                        "3-1": "1",
                        "과목평균": "1.6"
                    }
                },
                "성적강점": {
                    "강점1": "수학 과목에서 지속적으로 1등급 유지",
                    "강점2": "전반적으로 꾸준한 상승세를 보이고 있음",
                    "강점3": "과학 탐구 과목에서 최근 성적 향상이 두드러짐"
                },
                "성적약점": {
                    "약점1": "한국사 과목의 등급이 상대적으로 낮음",
                    "약점2": "사회 과목에서 2등급에 정체되어 있음",
                    "약점3": "영어 과목의 안정적인 1등급 유지 필요"
                },
                "성적심층분석": {
                    "국어": {
                        "과목명": "문학과 작문",
                        "알파벳": "B+",
                        "5등급제": "2",
                        "9등급제": "1",
                        "분석내용": "최근 1등급으로 상승. 문학 작품 분석 능력이 향상되었으며, 지속적인 독서로 어휘력과 표현력이 개선됨"
                    },
                    "수학": {
                        "과목명": "미적분학",
                        "알파벳": "A",
                        "5등급제": "1",
                        "9등급제": "1",
                        "분석내용": "전 학기 동안 1등급 유지. 개념 이해도가 높고 문제 풀이 능력이 뛰어남. 심화 문제 해결 능력도 우수"
                    },
                    "영어": {
                        "과목명": "영어 독해와 작문",
                        "알파벳": "B+",
                        "5등급제": "2",
                        "9등급제": "1",
                        "분석내용": "최근 1등급으로 상승. 독해 능력은 우수하나 영작 부분에서 간혹 실수 발생. 안정적인 1등급 유지 위해 노력 필요"
                    },
                    "사회": {
                        "과목명": "사회문화",
                        "알파벳": "B",
                        "5등급제": "2",
                        "9등급제": "2",
                        "분석내용": "2등급에 머물러 있음. 개념 이해는 되나 응용 문제에서 약점을 보임. 기출 문제 풀이와 개념 정리 필요"
                    },
                    "과학": {
                        "과목명": "물리학Ⅱ, 화학Ⅰ",
                        "알파벳": "A",
                        "5등급제": "1",
                        "9등급제": "1",
                        "분석내용": "최근 1등급으로 상승. 실험 활동과 탐구 과제를 통해 개념 이해도가 높아짐. 이공계 전공 적합성 우수"
                    },
                    "한국사": {
                        "과목명": "한국사",
                        "알파벳": "B",
                        "5등급제": "2",
                        "9등급제": "2",
                        "분석내용": "2등급 유지 중. 암기량이 많아 부담을 느끼는 것으로 보임. 스토리텔링 방식의 학습과 연표 정리 필요"
                    },
                    "교양": {
                        "과목명": "정보과학, 제2외국어",
                        "알파벳": "A",
                        "5등급제": "1",
                        "9등급제": "1",
                        "분석내용": "최근 1등급으로 상승. 정보과학에 대한 관심과 이해도가 높음. 제2외국어도 꾸준히 학습하여 성적 향상"
                    }
                },
                "성적보완방안": {
                    "한줄요약설명": "한국사, 사회 과목 집중 관리와 영어 1등급 안정화",
                    "본문설명": "전반적으로 우수한 성적을 유지하고 있으나, 한국사와 사회 과목에서 2등급에 머물러 있어 이 부분에 대한 집중적인 학습이 필요합니다. 한국사는 스토리텔링 방식의 학습과 연표 정리를 통해 암기 부담을 줄이고, 사회 과목은 기출 문제 풀이를 통해 응용력을 키워야 합니다. 영어는 최근 1등급으로 상승했으나, 안정적인 1등급 유지를 위해 영작 실수를 줄이는 연습이 필요합니다. 이를 통해 전 과목 1등급대 진입을 목표로 합니다."
                }
            }
        }
    }


def get_mock_comprehensive_analysis():
    """
    종합 분석 목업 데이터

    TODO: 실제 AI 모듈 연결 시 제거
    """
    return {
        "종합점수": {
            "값": "85점"
        },
        "종합의견": {
            "값": "이공계 전공 적합도가 높으며, 수학·과학 역량이 우수합니다. 인문학적 소양을 보완하면 더욱 경쟁력 있는 지원자가 될 것입니다."
        },
        "수시카드": {
            "경로A": {
                "첫번째": {
                    "학교이름": "서울대학교",
                    "과이름": "컴퓨터공학부",
                    "종합판단": "상향 지원 (합격 가능성 40%)"
                },
                "두번째": {
                    "학교이름": "연세대학교",
                    "과이름": "전기전자공학부",
                    "종합판단": "적정 지원 (합격 가능성 65%)"
                },
                "세번째": {
                    "학교이름": "고려대학교",
                    "과이름": "컴퓨터학과",
                    "종합판단": "적정 지원 (합격 가능성 70%)"
                },
                "네번째": {
                    "학교이름": "성균관대학교",
                    "과이름": "소프트웨어학과",
                    "종합판단": "안정 지원 (합격 가능성 80%)"
                },
                "다섯번째": {
                    "학교이름": "한양대학교",
                    "과이름": "컴퓨터소프트웨어학부",
                    "종합판단": "안정 지원 (합격 가능성 85%)"
                },
                "여섯번째": {
                    "학교이름": "중앙대학교",
                    "과이름": "소프트웨어학부",
                    "종합판단": "안전 지원 (합격 가능성 90%)"
                }
            },
            "경로B": {
                "첫번째": {
                    "학교이름": "카이스트",
                    "과이름": "전산학부",
                    "종합판단": "상향 지원 (합격 가능성 35%)"
                },
                "두번째": {
                    "학교이름": "포스텍",
                    "과이름": "컴퓨터공학과",
                    "종합판단": "상향 지원 (합격 가능성 45%)"
                },
                "세번째": {
                    "학교이름": "서울대학교",
                    "과이름": "전기정보공학부",
                    "종합판단": "적정 지원 (합격 가능성 60%)"
                },
                "네번째": {
                    "학교이름": "연세대학교",
                    "과이름": "컴퓨터과학과",
                    "종합판단": "적정 지원 (합격 가능성 70%)"
                },
                "다섯번째": {
                    "학교이름": "고려대학교",
                    "과이름": "전기전자공학부",
                    "종합판단": "안정 지원 (합격 가능성 80%)"
                },
                "여섯번째": {
                    "학교이름": "서강대학교",
                    "과이름": "컴퓨터공학과",
                    "종합판단": "안정 지원 (합격 가능성 85%)"
                }
            }
        },
        "진로적합도": {
            "첫번째": {
                "과이름": "컴퓨터공학",
                "적합도": "95%"
            },
            "두번째": {
                "과이름": "전기전자공학",
                "적합도": "90%"
            },
            "세번째": {
                "과이름": "소프트웨어학",
                "적합도": "92%"
            }
        },
        "긍정적요소": {
            "요소1": "수학·과학 우수 성적 및 지속적인 상승세",
            "요소2": "전공 관련 탐구 활동 및 프로젝트 경험 풍부",
            "요소3": "리더십과 협업 능력을 보여주는 다양한 비교과 활동"
        },
        "개선필요사항": {
            "사항1": "한국사, 사회 과목 성적 향상 필요",
            "사항2": "인문학적 소양을 보완할 수 있는 독서 및 활동",
            "사항3": "영어 1등급 안정화를 위한 지속적인 노력"
        },
        "학부모님께드리는조언": "학생은 이공계 전공에 필요한 기본 역량을 충분히 갖추고 있습니다. 다만, 수시 전형에서 경쟁력을 높이기 위해서는 한국사와 사회 과목의 성적 향상이 필요하며, 인문학적 소양을 기를 수 있는 독서 활동을 병행하는 것이 좋습니다. 지금의 노력을 꾸준히 이어간다면 목표 대학 합격이 충분히 가능할 것으로 보입니다.",
        "학생에게드리는응원의메세지": "지금까지 보여준 노력과 성실함이 정말 대단합니다! 수학과 과학에서의 우수한 성적은 여러분의 잠재력을 잘 보여주고 있어요. 앞으로 조금만 더 한국사와 사회 과목에 집중하고, 다양한 책을 읽으며 시야를 넓힌다면 더욱 멋진 대학생이 될 수 있을 거예요. 항상 응원합니다!",
        "목표대학에대한종합의견": "현재 성적과 활동 내역을 고려할 때, SKY 이공계 학과 합격이 충분히 가능한 수준입니다. 다만, 서울대는 상향 지원으로 분류되며, 연세대·고려대는 적정 지원으로 판단됩니다. 나머지 학기 동안 성적 관리와 생기부 보완에 집중한다면 합격 가능성이 더욱 높아질 것입니다.",
        "수시카드추천종합의견": "경로A는 일반 종합전형을 중심으로 구성했으며, 경로B는 과학기술 특화 대학을 포함한 전략입니다. 학생의 관심사와 목표에 따라 선택하시되, 상향-적정-안정-안전 지원의 균형을 맞춘 것이 특징입니다. 최종 결정은 3학년 1학기 성적 확정 후 재논의하는 것을 권장합니다.",
        "추천방학계획": "이번 방학에는 한국사 과목의 전체적인 복습과 정리를 최우선으로 하고, 사회 과목은 기출 문제 풀이를 통해 응용력을 키워야 합니다. 또한, 전공 관련 심화 독서를 통해 생기부를 보완하고, 가능하다면 대학 연구실 방문이나 온라인 강의 수강을 통해 전공에 대한 이해를 넓히는 것을 추천합니다."
    }


# TODO: 실제 AI 모듈 연결 함수들
def analyze_document_with_ai(document_id: str):
    """
    생기부 문서 분석 (AI 모듈 호출)

    TODO: 실제 AI 모듈 연결
    - 예시: result = ai_module.analyze_saenggibu(document_path)
    - OCR 처리 후 분석 결과 반환

    Args:
        document_id: Document 모델의 ID

    Returns:
        dict: 생기부_분석 결과 (AI 모듈 output 형식)
    """
    # 현재는 목업 데이터 반환
    return get_mock_saenggibu_analysis()


def analyze_grades_with_ai(student_id: str):
    """
    학생 성적 분석 (AI 모듈 호출)

    TODO: 실제 AI 모듈 연결
    - 예시: result = ai_module.analyze_grades(student_grades)
    - Grade 모델에서 학생의 전체 성적 조회 후 분석

    Args:
        student_id: Student 모델의 ID

    Returns:
        dict: 성적분석 결과 (AI 모듈 output 형식)
    """
    # 현재는 목업 데이터 반환
    return get_mock_grade_analysis()


def generate_comprehensive_analysis_with_ai(student_id: str):
    """
    종합 분석 생성 (AI 모듈 호출)

    TODO: 실제 AI 모듈 연결
    - 예시: result = ai_module.generate_comprehensive_report(student_id)
    - 생기부 분석 + 성적 분석을 종합하여 최종 리포트 생성

    Args:
        student_id: Student 모델의 ID

    Returns:
        dict: 종합분석 결과 (AI 모듈 output 형식)
    """
    # 현재는 목업 데이터 반환
    return get_mock_comprehensive_analysis()
